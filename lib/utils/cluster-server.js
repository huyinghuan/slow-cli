(function(){var ClusterServer,cluster,os;cluster=require("cluster"),os=require("os"),ClusterServer=function(){function ClusterServer(autoRestart,workerNumber){this.autoRestart=autoRestart||!0,this.workerNumber=workerNumber||os.cpus().length}return ClusterServer.prototype.start=function(server,port){var i,self,_i,_ref;if(self=this,!cluster.isMaster)return server.listen(port);for(i=_i=1,_ref=this.workerNumber;_ref>=1?_ref>=_i:_i>=_ref;i=_ref>=1?++_i:--_i)console.log("slow","#1"),cluster.fork();return cluster.on("death",function(worker){return console.log("slow "+worker.pid+" died"),self.autoRestart?cluster.fork():void 0})},ClusterServer}(),module.exports=ClusterServer}).call(this);